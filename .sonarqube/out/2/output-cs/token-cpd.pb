Í
VC:\Users\flacm\source\repos\Tura\Tura.DataAccess\EntityConfig\ConnectorEntityConfig.cs
	namespace 	
Tura
 
. 

DataAccess 
. 
EntityConfig &
{ 
class 	!
ConnectorEntityConfig
 
{ 
public		 
static		 
void		 
setEntityBuilder		 +
(		+ ,
EntityTypeBuilder		, =
<		= >
ConnectorEntity		> M
>		M N
entityBuilder		O \
)		\ ]
{

 	
entityBuilder 
. 
ToTable !
(! "
$str" .
). /
;/ 0
entityBuilder 
. 
HasKey  
(  !
x! "
=># %
x& '
.' (
Id( *
)* +
;+ ,
entityBuilder 
. 
Property "
(" #
x# $
=>% '
x( )
.) *
Id* ,
), -
.- .

IsRequired. 8
(8 9
)9 :
;: ;
entityBuilder 
. 
HasMany !
(! "
x" #
=>$ &
x' (
.( )
Users) .
). /
./ 0
WithOne0 7
(7 8
x8 9
=>: <
x= >
.> ?
	Connector? H
)H I
;I J
} 	
} 
} ‘	
\C:\Users\flacm\source\repos\Tura\Tura.DataAccess\EntityConfig\CorrelationRuleEntityConfig.cs
	namespace 	
Tura
 
. 

DataAccess 
. 
EntityConfig &
{ 
class 	'
CorrelationRuleEntityConfig
 %
{ 
public		 
static		 
void		 
setEntityBuilder		 +
(		+ ,
EntityTypeBuilder		, =
<		= >!
CorrelationRuleEntity		> S
>		S T
entityBuilder		U b
)		b c
{

 	
entityBuilder 
. 
ToTable !
(! "
$str" 4
)4 5
;5 6
entityBuilder 
. 
HasKey  
(  !
x! "
=># %
x& '
.' (
Guid( ,
), -
;- .
entityBuilder 
. 
Property "
(" #
x# $
=>% '
x( )
.) *
Guid* .
). /
./ 0

IsRequired0 :
(: ;
); <
;< =
} 	
} 
} Ç
ZC:\Users\flacm\source\repos\Tura\Tura.DataAccess\EntityConfig\Identity2UserEntityConfig.cs
	namespace 	
Tura
 
. 

DataAccess 
. 
EntityConfig &
{ 
class 	%
Identity2UserEntityConfig
 #
{ 
public		 
static		 
void		 
setEntityBuilder		 +
(		+ ,
EntityTypeBuilder		, =
<		= >
Identity2UserEntity		> Q
>		Q R
entityBuilder		S `
)		` a
{

 	
entityBuilder 
. 
ToTable !
(! "
$str" 4
)4 5
;5 6
entityBuilder 
. 
HasOne  
(  !
x! "
=># %
x& '
.' (
User( ,
), -
.- .
WithOne. 5
(5 6
x6 7
=>8 :
x; <
.< =
Identity= E
)E F
;F G
entityBuilder 
. 
HasOne  
(  !
x! "
=># %
x& '
.' (
Identity( 0
)0 1
.1 2
WithMany2 :
(: ;
x; <
=>= ?
x@ A
.A B
UsersB G
)G H
.H I
HasForeignKeyI V
(V W
xW X
=>Y [
x\ ]
.] ^

IdentityID^ h
)h i
;i j
entityBuilder 
. 
HasKey  
(  !
x! "
=># %
new& )
{* +
x, -
.- .

IdentityID. 8
,8 9
x: ;
.; <
UserID< B
}C D
)D E
;E F
entityBuilder 
. 
Property "
(" #
x# $
=>% '
x( )
.) *

IdentityID* 4
)4 5
.5 6

IsRequired6 @
(@ A
)A B
;B C
entityBuilder 
. 
Property "
(" #
x# $
=>% '
x( )
.) *
UserID* 0
)0 1
.1 2

IsRequired2 <
(< =
)= >
;> ?
} 	
} 
} É
UC:\Users\flacm\source\repos\Tura\Tura.DataAccess\EntityConfig\IdentityEntityConfig.cs
	namespace 	
Tura
 
. 

DataAccess 
. 
EntityConfig &
{ 
class 	 
IdentityEntityConfig
 
{ 
public		 
static		 
void		 
setEntityBuilder		 +
(		+ ,
EntityTypeBuilder		, =
<		= >
IdentityEntity		> L
>		L M
entityBuilder		N [
)		[ \
{

 	
entityBuilder 
. 
ToTable !
(! "
$str" .
). /
;/ 0
entityBuilder 
. 
HasKey  
(  !
x! "
=># %
x& '
.' (
Id( *
)* +
;+ ,
entityBuilder 
. 
Property "
(" #
x# $
=>% '
x( )
.) *
Id* ,
), -
.- .

IsRequired. 8
(8 9
)9 :
;: ;
entityBuilder 
. 
HasMany !
(! "
x" #
=>$ &
x' (
.( )
Users) .
). /
./ 0
WithOne0 7
(7 8
x8 9
=>: <
x= >
.> ?
Identity? G
)G H
;H I
} 	
} 
} Ü
QC:\Users\flacm\source\repos\Tura\Tura.DataAccess\EntityConfig\UserEntityConfig.cs
	namespace 	
Tura
 
. 

DataAccess 
. 
EntityConfig &
{ 
class 	
UserEntityConfig
 
{ 
public		 
static		 
void		 
setEntityBuilder		 +
(		+ ,
EntityTypeBuilder		, =
<		= >

UserEntity		> H
>		H I
entityBuilder		J W
)		W X
{

 	
entityBuilder 
. 
ToTable !
(! "
$str" )
)) *
;* +
entityBuilder 
. 
HasKey  
(  !
x! "
=># %
x& '
.' (
Id( *
)* +
;+ ,
entityBuilder 
. 
Property "
(" #
x# $
=>% '
x( )
.) *
Id* ,
), -
.- .

IsRequired. 8
(8 9
)9 :
;: ;
entityBuilder 
. 
HasOne  
(  !
x! "
=># %
x& '
.' (
	Connector( 1
)1 2
.2 3
WithMany3 ;
(; <
y< =
=>> @
yA B
.B C
UsersC H
)H I
.I J
HasForeignKeyJ W
(W X
xX Y
=>Y [
x[ \
.\ ]
ConnectorID] h
)h i
;i j
} 	
} 
} ½p
^C:\Users\flacm\source\repos\Tura\Tura.DataAccess\Migrations\20191121022032_InitialMigration.cs
	namespace 	
Tura
 
. 

DataAccess 
. 

Migrations $
{ 
public 

partial 
class 
InitialMigration )
:* +
	Migration, 5
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{		 	
migrationBuilder

 
.

 
CreateTable

 (
(

( )
name 
: 
$str "
," #
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
Guid& *
>* +
(+ ,
nullable, 4
:4 5
false6 ;
); <
,< =
Name 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
nullable0 8
:8 9
true: >
)> ?
,? @

AppRefName 
=  
table! &
.& '
Column' -
<- .
string. 4
>4 5
(5 6
nullable6 >
:> ?
true@ D
)D E
,E F
IP 
= 
table 
. 
Column %
<% &
string& ,
>, -
(- .
nullable. 6
:6 7
true8 <
)< =
,= >
Uname 
= 
table !
.! "
Column" (
<( )
string) /
>/ 0
(0 1
nullable1 9
:9 :
true; ?
)? @
,@ A
Passwd 
= 
table "
." #
Column# )
<) *
string* 0
>0 1
(1 2
nullable2 :
:: ;
true< @
)@ A
,A B
DBName 
= 
table "
." #
Column# )
<) *
string* 0
>0 1
(1 2
nullable2 :
:: ;
true< @
)@ A
,A B
Port 
= 
table  
.  !
Column! '
<' (
int( +
>+ ,
(, -
nullable- 5
:5 6
false7 <
)< =
,= >
	OtherInfo 
= 
table  %
.% &
Column& ,
<, -
string- 3
>3 4
(4 5
nullable5 =
:= >
true? C
)C D
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 4
,4 5
x6 7
=>8 :
x; <
.< =
Id= ?
)? @
;@ A
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str (
,( )
columns 
: 
table 
=> !
new" %
{   
Guid!! 
=!! 
table!!  
.!!  !
Column!!! '
<!!' (
Guid!!( ,
>!!, -
(!!- .
nullable!!. 6
:!!6 7
false!!8 =
)!!= >
,!!> ?
name"" 
="" 
table""  
.""  !
Column""! '
<""' (
string""( .
>"". /
(""/ 0
nullable""0 8
:""8 9
true"": >
)""> ?
,""? @
rule## 
=## 
table##  
.##  !
Column##! '
<##' (
string##( .
>##. /
(##/ 0
nullable##0 8
:##8 9
true##: >
)##> ?
}$$ 
,$$ 
constraints%% 
:%% 
table%% "
=>%%# %
{&& 
table'' 
.'' 

PrimaryKey'' $
(''$ %
$str''% :
,'': ;
x''< =
=>''> @
x''A B
.''B C
Guid''C G
)''G H
;''H I
}(( 
)(( 
;(( 
migrationBuilder** 
.** 
CreateTable** (
(**( )
name++ 
:++ 
$str++ "
,++" #
columns,, 
:,, 
table,, 
=>,, !
new,," %
{-- 
Id.. 
=.. 
table.. 
... 
Column.. %
<..% &
Guid..& *
>..* +
(..+ ,
nullable.., 4
:..4 5
false..6 ;
)..; <
,..< =
UserName// 
=// 
table// $
.//$ %
Column//% +
<//+ ,
string//, 2
>//2 3
(//3 4
nullable//4 <
://< =
true//> B
)//B C
,//C D
Name00 
=00 
table00  
.00  !
Column00! '
<00' (
string00( .
>00. /
(00/ 0
nullable000 8
:008 9
true00: >
)00> ?
,00? @
Surname11 
=11 
table11 #
.11# $
Column11$ *
<11* +
string11+ 1
>111 2
(112 3
nullable113 ;
:11; <
true11= A
)11A B
,11B C
Email22 
=22 
table22 !
.22! "
Column22" (
<22( )
string22) /
>22/ 0
(220 1
nullable221 9
:229 :
true22; ?
)22? @
,22@ A
IsActive33 
=33 
table33 $
.33$ %
Column33% +
<33+ ,
bool33, 0
>330 1
(331 2
nullable332 :
:33: ;
false33< A
)33A B
,33B C
Created44 
=44 
table44 #
.44# $
Column44$ *
<44* +
DateTime44+ 3
>443 4
(444 5
nullable445 =
:44= >
false44? D
)44D E
,44E F
Modified55 
=55 
table55 $
.55$ %
Column55% +
<55+ ,
DateTime55, 4
>554 5
(555 6
nullable556 >
:55> ?
false55@ E
)55E F
}66 
,66 
constraints77 
:77 
table77 "
=>77# %
{88 
table99 
.99 

PrimaryKey99 $
(99$ %
$str99% 4
,994 5
x996 7
=>998 :
x99; <
.99< =
Id99= ?
)99? @
;99@ A
}:: 
):: 
;:: 
migrationBuilder<< 
.<< 
CreateTable<< (
(<<( )
name== 
:== 
$str== 
,== 
columns>> 
:>> 
table>> 
=>>> !
new>>" %
{?? 
Id@@ 
=@@ 
table@@ 
.@@ 
Column@@ %
<@@% &
Guid@@& *
>@@* +
(@@+ ,
nullable@@, 4
:@@4 5
false@@6 ;
)@@; <
,@@< =
ConnectorIDAA 
=AA  !
tableAA" '
.AA' (
ColumnAA( .
<AA. /
GuidAA/ 3
>AA3 4
(AA4 5
nullableAA5 =
:AA= >
falseAA? D
)AAD E
,AAE F
UsernameBB 
=BB 
tableBB $
.BB$ %
ColumnBB% +
<BB+ ,
stringBB, 2
>BB2 3
(BB3 4
nullableBB4 <
:BB< =
trueBB> B
)BBB C
,BBC D
NameCC 
=CC 
tableCC  
.CC  !
ColumnCC! '
<CC' (
stringCC( .
>CC. /
(CC/ 0
nullableCC0 8
:CC8 9
trueCC: >
)CC> ?
,CC? @
SurnameDD 
=DD 
tableDD #
.DD# $
ColumnDD$ *
<DD* +
stringDD+ 1
>DD1 2
(DD2 3
nullableDD3 ;
:DD; <
trueDD= A
)DDA B
,DDB C

InternalIDEE 
=EE  
tableEE! &
.EE& '
ColumnEE' -
<EE- .
intEE. 1
>EE1 2
(EE2 3
nullableEE3 ;
:EE; <
trueEE= A
)EEA B
,EEB C
IsActiveFF 
=FF 
tableFF $
.FF$ %
ColumnFF% +
<FF+ ,
intFF, /
>FF/ 0
(FF0 1
nullableFF1 9
:FF9 :
trueFF; ?
)FF? @
,FF@ A

IdentityIDGG 
=GG  
tableGG! &
.GG& '
ColumnGG' -
<GG- .
GuidGG. 2
>GG2 3
(GG3 4
nullableGG4 <
:GG< =
trueGG> B
)GGB C
}HH 
,HH 
constraintsII 
:II 
tableII "
=>II# %
{JJ 
tableKK 
.KK 

PrimaryKeyKK $
(KK$ %
$strKK% /
,KK/ 0
xKK1 2
=>KK3 5
xKK6 7
.KK7 8
IdKK8 :
)KK: ;
;KK; <
tableLL 
.LL 

ForeignKeyLL $
(LL$ %
nameMM 
:MM 
$strMM ?
,MM? @
columnNN 
:NN 
xNN  !
=>NN" $
xNN% &
.NN& '
ConnectorIDNN' 2
,NN2 3
principalTableOO &
:OO& '
$strOO( 4
,OO4 5
principalColumnPP '
:PP' (
$strPP) -
,PP- .
onDeleteQQ  
:QQ  !
ReferentialActionQQ" 3
.QQ3 4
CascadeQQ4 ;
)QQ; <
;QQ< =
}RR 
)RR 
;RR 
migrationBuilderTT 
.TT 
CreateTableTT (
(TT( )
nameUU 
:UU 
$strUU (
,UU( )
columnsVV 
:VV 
tableVV 
=>VV !
newVV" %
{WW 
UserIDXX 
=XX 
tableXX "
.XX" #
ColumnXX# )
<XX) *
GuidXX* .
>XX. /
(XX/ 0
nullableXX0 8
:XX8 9
falseXX: ?
)XX? @
,XX@ A

IdentityIDYY 
=YY  
tableYY! &
.YY& '
ColumnYY' -
<YY- .
GuidYY. 2
>YY2 3
(YY3 4
nullableYY4 <
:YY< =
falseYY> C
)YYC D
}ZZ 
,ZZ 
constraints[[ 
:[[ 
table[[ "
=>[[# %
{\\ 
table]] 
.]] 

PrimaryKey]] $
(]]$ %
$str]]% :
,]]: ;
x]]< =
=>]]> @
new]]A D
{]]E F
x]]G H
.]]H I

IdentityID]]I S
,]]S T
x]]U V
.]]V W
UserID]]W ]
}]]^ _
)]]_ `
;]]` a
table^^ 
.^^ 

ForeignKey^^ $
(^^$ %
name__ 
:__ 
$str__ I
,__I J
column`` 
:`` 
x``  !
=>``" $
x``% &
.``& '

IdentityID``' 1
,``1 2
principalTableaa &
:aa& '
$straa( 4
,aa4 5
principalColumnbb '
:bb' (
$strbb) -
,bb- .
onDeletecc  
:cc  !
ReferentialActioncc" 3
.cc3 4
Cascadecc4 ;
)cc; <
;cc< =
tabledd 
.dd 

ForeignKeydd $
(dd$ %
nameee 
:ee 
$stree @
,ee@ A
columnff 
:ff 
xff  !
=>ff" $
xff% &
.ff& '
UserIDff' -
,ff- .
principalTablegg &
:gg& '
$strgg( /
,gg/ 0
principalColumnhh '
:hh' (
$strhh) -
,hh- .
onDeleteii  
:ii  !
ReferentialActionii" 3
.ii3 4
Cascadeii4 ;
)ii; <
;ii< =
}jj 
)jj 
;jj 
migrationBuilderll 
.ll 
CreateIndexll (
(ll( )
namemm 
:mm 
$strmm 2
,mm2 3
tablenn 
:nn 
$strnn )
,nn) *
columnoo 
:oo 
$stroo  
,oo  !
uniquepp 
:pp 
truepp 
)pp 
;pp 
migrationBuilderrr 
.rr 
CreateIndexrr (
(rr( )
namess 
:ss 
$strss ,
,ss, -
tablett 
:tt 
$strtt 
,tt 
columnuu 
:uu 
$struu %
)uu% &
;uu& '
}vv 	
	protectedxx 
overridexx 
voidxx 
Downxx  $
(xx$ %
MigrationBuilderxx% 5
migrationBuilderxx6 F
)xxF G
{yy 	
migrationBuilderzz 
.zz 
	DropTablezz &
(zz& '
name{{ 
:{{ 
$str{{ (
){{( )
;{{) *
migrationBuilder}} 
.}} 
	DropTable}} &
(}}& '
name~~ 
:~~ 
$str~~ (
)~~( )
;~~) *
migrationBuilder
€€ 
.
€€ 
	DropTable
€€ &
(
€€& '
name
 
:
 
$str
 "
)
" #
;
# $
migrationBuilder
ƒƒ 
.
ƒƒ 
	DropTable
ƒƒ &
(
ƒƒ& '
name
„„ 
:
„„ 
$str
„„ 
)
„„ 
;
„„ 
migrationBuilder
†† 
.
†† 
	DropTable
†† &
(
††& '
name
‡‡ 
:
‡‡ 
$str
‡‡ "
)
‡‡" #
;
‡‡# $
}
ˆˆ 	
}
‰‰ 
}ŠŠ ù&
TC:\Users\flacm\source\repos\Tura\Tura.DataAccess\Repositories\ConnectorRepository.cs
	namespace 	
Tura
 
. 

DataAccess 
. 
Repositories &
{ 
public 

class 
ConnectorRepository $
:% & 
IConnectorRepository' ;
{ 
private 
readonly 
ITuraDBContext '
turaDBContext( 5
;5 6
public 
ConnectorRepository "
(" #
TuraDBContext# 0
turaDBContext1 >
)> ?
{ 	
this 
. 
turaDBContext 
=  
turaDBContext! .
;. /
} 	
public 
async 
Task 
< 
ConnectorEntity )
>) *
Add+ .
(. /
ConnectorEntity/ >
connectorEntity? N
)N O
{ 	
await 
turaDBContext 
.  

Connectors  *
.* +
AddAsync+ 3
(3 4
connectorEntity4 C
)C D
;D E
await 
turaDBContext 
.  
SaveChangesAsync  0
(0 1
)1 2
;2 3
return 
connectorEntity "
;" #
} 	
public 
async 
Task 
< 
ConnectorEntity )
>) *
DeleteAsync+ 6
(6 7
Guid7 ;
id< >
)> ?
{ 	
var 
entity 
= 
await 
turaDBContext ,
., -

Connectors- 7
.7 8
SingleAsync8 C
(C D
xD E
=>F H
xI J
.J K
IdK M
==N P
idQ S
)S T
;T U
turaDBContext 
. 

Connectors $
.$ %
Remove% +
(+ ,
entity, 2
)2 3
;3 4
await   
turaDBContext   
.    
SaveChangesAsync    0
(  0 1
)  1 2
;  2 3
return!! 
entity!! 
;!! 
}"" 	
public$$ 
async$$ 
Task$$ 
<$$ 
bool$$ 
>$$ 
Exist$$  %
($$% &
Guid$$& *
id$$+ -
)$$- .
{%% 	
int&& 
entity&& 
=&& 
await&& 
turaDBContext&& ,
.&&, -

Connectors&&- 7
.&&7 8

CountAsync&&8 B
(&&B C
x&&C D
=>&&E G
x&&G H
.&&H I
Id&&I K
==&&L N
id&&O Q
)&&Q R
;&&R S
return'' 
entity'' 
>'' 
$num'' 
?'' 
true''  
:''  !
false''! &
;''& '
}(( 	
public** 
async** 
Task** 
<** 
ConnectorEntity** )
>**) *
Get**+ .
(**. /
Guid**/ 3
id**4 6
)**6 7
{++ 	
var,, 
result,, 
=,, 
await,, 
turaDBContext,, ,
.,,, -

Connectors,,- 7
.,,7 8
Include,,8 ?
(,,? @
x,,@ A
=>,,B D
x,,E F
.,,F G
Users,,G L
),,L M
.,,M N
FirstOrDefaultAsync,,N a
(,,a b
x,,b c
=>,,d f
x,,g h
.,,h i
Id,,i k
==,,l n
id,,o q
),,q r
;,,r s
return-- 
result-- 
;-- 
}.. 	
public00 
async00 
Task00 
<00 
IEnumerable00 %
<00% &
ConnectorEntity00& 5
>005 6
>006 7
GetAll008 >
(00> ?
)00? @
{11 	
return22 
turaDBContext22  
.22  !

Connectors22! +
.22+ ,
Select22, 2
(222 3
x223 4
=>225 7
x228 9
)229 :
;22: ;
}33 	
public55 
async55 
Task55 
<55 
ConnectorEntity55 )
>55) *
Update55+ 1
(551 2
ConnectorEntity552 A
element55B I
)55I J
{66 	
var77 
updateEntity77 
=77 
turaDBContext77 ,
.77, -

Connectors77- 7
.777 8
Update778 >
(77> ?
element77? F
)77F G
;77G H
await88 
turaDBContext88 
.88  
SaveChangesAsync88  0
(880 1
)881 2
;882 3
return99 
updateEntity99 
.99  
Entity99  &
;99& '
}:: 	
};; 
}<< Ó&
[C:\Users\flacm\source\repos\Tura\Tura.DataAccess\Repositories\CorrelationRulesRepository.cs
	namespace 	
Tura
 
. 

DataAccess 
. 
Repositories &
{ 
public 

class &
CorrelationRulesRepository +
:, -'
ICorrelationRulesRepository. I
{ 
private 
readonly 
ITuraDBContext '
turaDBContext( 5
;5 6
public &
CorrelationRulesRepository )
() *
TuraDBContext* 7
turaDBContext8 E
)E F
{ 	
this 
. 
turaDBContext 
=  
turaDBContext! .
;. /
} 	
public 
async 
Task 
< !
CorrelationRuleEntity /
>/ 0
Add1 4
(4 5!
CorrelationRuleEntity5 J!
correlationRuleEntityK `
)` a
{ 	
await 
turaDBContext 
.  
Correlations  ,
., -
AddAsync- 5
(5 6!
correlationRuleEntity6 K
)K L
;L M
await 
turaDBContext 
.  
SaveChangesAsync  0
(0 1
)1 2
;2 3
return !
correlationRuleEntity (
;( )
} 	
public 
async 
Task 
< !
CorrelationRuleEntity /
>/ 0
DeleteAsync1 <
(< =
Guid= A
idB D
)D E
{ 	
var 
entity 
= 
await 
turaDBContext ,
., -
Correlations- 9
.9 :
SingleAsync: E
(E F
xF G
=>H J
xK L
.L M
GuidM Q
==R T
idU W
)W X
;X Y
turaDBContext 
. 
Correlations &
.& '
Remove' -
(- .
entity. 4
)4 5
;5 6
await   
turaDBContext   
.    
SaveChangesAsync    0
(  0 1
)  1 2
;  2 3
return!! 
entity!! 
;!! 
}"" 	
public$$ 
async$$ 
Task$$ 
<$$ 
bool$$ 
>$$ 
Exist$$  %
($$% &
Guid$$& *
id$$+ -
)$$- .
{%% 	
int&& 
entity&& 
=&& 
await&& 
turaDBContext&& ,
.&&, -
Correlations&&- 9
.&&9 :

CountAsync&&: D
(&&D E
x&&E F
=>&&G I
x&&I J
.&&J K
Guid&&K O
==&&P R
id&&S U
)&&U V
;&&V W
return'' 
entity'' 
>'' 
$num'' 
?'' 
true''  
:''  !
false''! &
;''& '
}(( 	
public** 
async** 
Task** 
<** !
CorrelationRuleEntity** /
>**/ 0
Get**1 4
(**4 5
Guid**5 9
id**: <
)**< =
{++ 	
var,, 
result,, 
=,, 
await,, 
turaDBContext,, ,
.,,, -
Correlations,,- 9
.,,9 :
FirstOrDefaultAsync,,: M
(,,M N
x,,N O
=>,,P R
x,,S T
.,,T U
Guid,,U Y
==,,Z \
id,,] _
),,_ `
;,,` a
return-- 
result-- 
;-- 
}.. 	
public00 
async00 
Task00 
<00 
IEnumerable00 %
<00% &!
CorrelationRuleEntity00& ;
>00; <
>00< =
GetAll00> D
(00D E
)00E F
{11 	
return22 
turaDBContext22  
.22  !
Correlations22! -
.22- .
Select22. 4
(224 5
x225 6
=>227 9
x22: ;
)22; <
;22< =
}33 	
public55 
async55 
Task55 
<55 !
CorrelationRuleEntity55 /
>55/ 0
Update551 7
(557 8!
CorrelationRuleEntity558 M
element55N U
)55U V
{66 	
var77 
updateEntity77 
=77 
turaDBContext77 ,
.77, -
Correlations77- 9
.779 :
Update77: @
(77@ A
element77A H
)77H I
;77I J
await88 
turaDBContext88 
.88  
SaveChangesAsync88  0
(880 1
)881 2
;882 3
return99 
updateEntity99 
.99  
Entity99  &
;99& '
}:: 	
};; 
}<< ä'
SC:\Users\flacm\source\repos\Tura\Tura.DataAccess\Repositories\IdentityRepository.cs
	namespace 	
Tura
 
. 

DataAccess 
. 
Repositories &
{ 
public 

class 
IdentityRepository #
:$ %
IIdentityRepository& 9
{ 
private 
readonly 
ITuraDBContext '
turaDBContext( 5
;5 6
public 
IdentityRepository !
(! "
TuraDBContext" /
turaDBContext0 =
)= >
{ 	
this 
. 
turaDBContext 
=  
turaDBContext! .
;. /
} 	
public 
async 
Task 
< 
IdentityEntity (
>( )
Add* -
(- .
IdentityEntity. <
element= D
)D E
{ 	
await 
turaDBContext 
.  

Identities  *
.* +
AddAsync+ 3
(3 4
element4 ;
); <
;< =
await 
turaDBContext 
.  
SaveChangesAsync  0
(0 1
)1 2
;2 3
return 
element 
; 
} 	
public 
async 
Task 
< 
IdentityEntity (
>( )
DeleteAsync* 5
(5 6
Guid6 :
id; =
)= >
{ 	
var 
entity 
= 
await 
turaDBContext ,
., -

Identities- 7
.7 8
SingleAsync8 C
(C D
xD E
=>F H
xI J
.J K
IdK M
==N P
idQ S
)S T
;T U
turaDBContext 
. 

Identities $
.$ %
Remove% +
(+ ,
entity, 2
)2 3
;3 4
await   
turaDBContext   
.    
SaveChangesAsync    0
(  0 1
)  1 2
;  2 3
return!! 
entity!! 
;!! 
}"" 	
public$$ 
async$$ 
Task$$ 
<$$ 
bool$$ 
>$$ 
Exist$$  %
($$% &
Guid$$& *
id$$+ -
)$$- .
{%% 	
int&& 
entity&& 
=&& 
await&& 
turaDBContext&& ,
.&&, -

Identities&&- 7
.&&7 8

CountAsync&&8 B
(&&B C
x&&C D
=>&&E G
x&&H I
.&&I J
Id&&J L
==&&M O
id&&P R
)&&R S
;&&S T
return'' 
entity'' 
>'' 
$num'' 
?'' 
true''  $
:''% &
false''' ,
;'', -
}(( 	
public** 
async** 
Task** 
<** 
IdentityEntity** (
>**( )
Get*** -
(**- .
Guid**. 2
id**3 5
)**5 6
{++ 	
var,, 
result,, 
=,, 
await,, 
turaDBContext,, ,
.,,, -

Identities,,- 7
.,,7 8
Include,,8 ?
(,,? @
x,,@ A
=>,,B D
x,,E F
.,,F G
Users,,G L
),,L M
.,,M N
FirstOrDefaultAsync,,N a
(,,a b
x,,b c
=>,,d f
x,,g h
.,,h i
Id,,i k
==,,l n
id,,o q
),,q r
;,,r s
return-- 
result-- 
;-- 
}.. 	
public00 
async00 
Task00 
<00 
IEnumerable00 %
<00% &
IdentityEntity00& 4
>004 5
>005 6
GetAll007 =
(00= >
)00> ?
{11 	
return22 
turaDBContext22  
.22  !

Identities22! +
.22+ ,
Select22, 2
(222 3
x223 4
=>225 7
x228 9
)229 :
;22: ;
}33 	
public55 
async55 
Task55 
<55 
IdentityEntity55 (
>55( )
Update55* 0
(550 1
IdentityEntity551 ?
element55@ G
)55G H
{66 	
element77 
.77 
Modified77 
=77 
DateTime77 '
.77' (
Now77( +
;77+ ,
var88 
updateEntity88 
=88 
turaDBContext88 ,
.88, -

Identities88- 7
.887 8
Update888 >
(88> ?
element88? F
)88F G
;88G H
await99 
turaDBContext99 
.99  
SaveChangesAsync99  0
(990 1
)991 2
;992 3
return:: 
updateEntity:: 
.::  
Entity::  &
;::& '
};; 	
}<< 
}== ‹&
OC:\Users\flacm\source\repos\Tura\Tura.DataAccess\Repositories\UserRepository.cs
	namespace 	
Tura
 
. 

DataAccess 
. 
Repositories &
{ 
public 

class 
UserRepository 
:  !
IUserRepository" 1
{ 
private 
readonly 
ITuraDBContext '
turaDBContext( 5
;5 6
public 
UserRepository 
( 
TuraDBContext +
turaDBContext, 9
)9 :
{ 	
this 
. 
turaDBContext 
=  
turaDBContext! .
;. /
} 	
public 
async 
Task 
< 

UserEntity $
>$ %
Add& )
() *

UserEntity* 4
element5 <
)< =
{ 	
await 
turaDBContext 
.  
Users  %
.% &
AddAsync& .
(. /
element/ 6
)6 7
;7 8
await 
turaDBContext 
.  
SaveChangesAsync  0
(0 1
)1 2
;2 3
return 
element 
; 
} 	
public 
async 
Task 
< 

UserEntity $
>$ %
DeleteAsync& 1
(1 2
Guid2 6
id7 9
)9 :
{ 	
var 
entity 
= 
await 
turaDBContext ,
., -
Users- 2
.2 3
SingleAsync3 >
(> ?
x? @
=>A C
xD E
.E F
IdF H
==I K
idL N
)N O
;O P
turaDBContext 
. 
Users 
.  
Remove  &
(& '
entity' -
)- .
;. /
await   
turaDBContext   
.    
SaveChangesAsync    0
(  0 1
)  1 2
;  2 3
return!! 
entity!! 
;!! 
}"" 	
public$$ 
async$$ 
Task$$ 
<$$ 
bool$$ 
>$$ 
Exist$$  %
($$% &
Guid$$& *
id$$+ -
)$$- .
{%% 	
int&& 
entity&& 
=&& 
await&& 
turaDBContext&& ,
.&&, -
Users&&- 2
.&&2 3

CountAsync&&3 =
(&&= >
x&&> ?
=>&&@ B
x&&C D
.&&D E
Id&&E G
==&&H J
id&&K M
)&&M N
;&&N O
return'' 
entity'' 
>'' 
$num'' 
?'' 
true''  $
:''% &
false''' ,
;'', -
}(( 	
public** 
async** 
Task** 
<** 

UserEntity** $
>**$ %
Get**& )
(**) *
Guid*** .
id**/ 1
)**1 2
{++ 	
var,, 
result,, 
=,, 
await,, 
turaDBContext,, ,
.,,, -
Users,,- 2
.,,2 3
Include,,3 :
(,,: ;
x,,; <
=>,,= ?
x,,@ A
.,,A B
	Connector,,B K
),,K L
.,,L M
FirstOrDefaultAsync,,M `
(,,` a
x,,a b
=>,,c e
x,,f g
.,,g h
Id,,h j
==,,k m
id,,n p
),,p q
;,,q r
return-- 
result-- 
;-- 
}.. 	
public00 
async00 
Task00 
<00 
IEnumerable00 %
<00% &

UserEntity00& 0
>000 1
>001 2
GetAll003 9
(009 :
)00: ;
{11 	
return22 
turaDBContext22  
.22  !
Users22! &
.22& '
Select22' -
(22- .
x22. /
=>220 2
x223 4
)224 5
;225 6
}33 	
public55 
async55 
Task55 
<55 

UserEntity55 $
>55$ %
Update55& ,
(55, -

UserEntity55- 7
element558 ?
)55? @
{66 	
var77 
updateEntity77 
=77 
turaDBContext77 ,
.77, -
Users77- 2
.772 3
Update773 9
(779 :
element77: A
)77A B
;77B C
await88 
turaDBContext88 
.88  
SaveChangesAsync88  0
(880 1
)881 2
;882 3
return99 
updateEntity99 
.99  
Entity99  &
;99& '
}:: 	
};; 
}<< À
AC:\Users\flacm\source\repos\Tura\Tura.DataAccess\TuraDBContext.cs
	namespace 	
Tura
 
. 

DataAccess 
{		 
public

 

class

 
TuraDBContext

 
:

  
	DbContext

! *
,

* +
ITuraDBContext

, :
{ 
public 
DbSet 
< 
ConnectorEntity $
>$ %

Connectors& 0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
public 
DbSet 
< !
CorrelationRuleEntity *
>* +
Correlations, 8
{9 :
get; >
;> ?
set@ C
;C D
}E F
public 
DbSet 
< 
IdentityEntity #
># $

Identities% /
{0 1
get2 5
;5 6
set7 :
;: ;
}< =
public 
DbSet 
< 

UserEntity 
>  
Users! &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
DbSet 
< 
Identity2UserEntity (
>( )
Identity2Users* 8
{9 :
get; >
;> ?
set@ C
;C D
}E F
DatabaseFacade 
ITuraDBContext %
.% &
Database& .
{/ 0
get1 4
=>5 7
throw8 =
new> A#
NotImplementedExceptionB Y
(Y Z
)Z [
;[ \
}] ^
public 
TuraDBContext 
( 
DbContextOptions -
options. 5
)5 6
:7 8
base9 =
(= >
options> E
)E F
{ 	
} 	
public 
TuraDBContext 
( 
) 
{ 	
} 	
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
modelBuilder= I
)I J
{ 	!
ConnectorEntityConfig !
.! "
setEntityBuilder" 2
(2 3
modelBuilder3 ?
.? @
Entity@ F
<F G
ConnectorEntityG V
>V W
(W X
)X Y
)Y Z
;Z [
UserEntityConfig 
. 
setEntityBuilder -
(- .
modelBuilder. :
.: ;
Entity; A
<A B

UserEntityB L
>L M
(M N
)N O
)O P
;P Q 
IdentityEntityConfig  
.  !
setEntityBuilder! 1
(1 2
modelBuilder2 >
.> ?
Entity? E
<E F
IdentityEntityF T
>T U
(U V
)V W
)W X
;X Y'
CorrelationRuleEntityConfig   '
.  ' (
setEntityBuilder  ( 8
(  8 9
modelBuilder  9 E
.  E F
Entity  F L
<  L M!
CorrelationRuleEntity  M b
>  b c
(  c d
)  d e
)  e f
;  f g%
Identity2UserEntityConfig!! %
.!!% &
setEntityBuilder!!& 6
(!!6 7
modelBuilder!!7 C
.!!C D
Entity!!D J
<!!J K
Identity2UserEntity!!K ^
>!!^ _
(!!_ `
)!!` a
)!!a b
;!!b c
base## 
.## 
OnModelCreating##  
(##  !
modelBuilder##! -
)##- .
;##. /
}$$ 	
}%% 
}&& 